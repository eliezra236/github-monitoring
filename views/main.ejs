<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GitHub Pull Requests</title>
    <!--    Bootstrap CSS-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.19.0/dist/bootstrap-table.min.css">

    <!--    Highlighter-->
    <link rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github.min.css">

</head>

<body>


<div class="container">
    <h1>Pull Requests History</h1>

    <table id="table" data-toggle="table" data-search="true">
        <thead>
        <tr>
            <th>Request ID</th>
            <th data-sortable="true">Title</th>
            <th data-sortable="true">Action</th>
            <th>User</th>
            <th>Full Details</th>
        </tr>
        </thead>
        <tbody>
        <% for (let request of pullRequests) { %>
            <tr>
                <td><%=request.request.pull_request.id%></td>
                <td><%=request.request.pull_request.title%></td>
                <td><%=request.request.action%></td>
                <td><%=request.request.pull_request.user.login%></td>
                <td><%- include('fullDetailsModal', {title: request._id, request: request.request}); %></td>
            </tr>
        <% } %>
        </tbody>
    </table>

    <ol>
        <% for(let request of pullRequests) { %>
            <li>
                <span><%= request.request.pull_request.title %> - </span>
                <a role="button" data-bs-toggle="collapse" href="#Example-Full"
                   aria-expanded="false" aria-controls="collapseExample">
                    <%= request._id %>
                </a>
                <div class="collapse" id="Example-Full">
                    <div class="card card-body">
                        <pre><code class="language-json">><%- JSON.stringify(request.request, undefined, 2) %></code></pre>
                    </div>
                </div>
            </li>
        <% } %>
    </ol>
</div>


<!--Bootstrap JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

<!--Highlighter-->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

<!--Bootstrap Table-->
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.19.0/dist/bootstrap-table.min.js"></script>
</body>
</html>